<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Recarga - H Invest</title>

  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
    import { getDatabase, ref, push } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js";

    // Configuração do Firebase com os dados do seu projeto
    const firebaseConfig = {
      apiKey: "AIzaSyCKSKnVC8dNWmiMrNr1j4rMLfQTlOrqzVM",
      authDomain: "hinvest-f4354.firebaseapp.com",
      databaseURL: "https://hinvest-f4354-default-rtdb.firebaseio.com",
      projectId: "hinvest-f4354",
      storageBucket: "hinvest-f4354.firebasestorage.app",
      messagingSenderId: "646397677016",
      appId: "1:646397677016:web:f05ca27a38439568bff6ad"
    };

    // Inicialização do Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);

    // Função para salvar a recarga no Firebase
    function salvarRecarga(valor, status) {
      const recargaRef = ref(database, 'recargas');
      push(recargaRef, {
        valor: valor,
        data: new Date().toLocaleString(),
        status: status
      }).then(() => {
        console.log('Recarga registrada com sucesso no Firebase!');
      }).catch((err) => {
        console.error('Erro ao registrar a recarga no Firebase:', err);
      });
    }
  </script>

  <style>
    body {
      background-color: #000000;
      color: #fff;
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      flex-direction: column;
    }

    .container {
      background-color: #2c3e50;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
      width: 90%;
      max-width: 400px;
    }

    h2 {
      color: #f39c12;
      text-align: center;
    }

    select, button, input {
      background-color: #34495e;
      color: #fff;
      border: 1px solid #f39c12;
      padding: 12px;
      margin-top: 15px;
      width: 100%;
      border-radius: 5px;
      font-size: 16px;
    }

    button:hover {
      background-color: #f39c12;
      color: #2c3e50;
    }

    #resultado {
      margin-top: 20px;
      display: none;
    }

    .opcoes-pagamento {
      margin-top: 20px;
      display: none;
      text-align: center;
    }

    .opcoes-pagamento button {
      margin-top: 10px;
    }

    .pagamento-confirmado {
      display: none;
      color: #27ae60;
      text-align: center;
      font-size: 18px;
    }

    .termos {
      margin-top: 30px;
      font-size: 14px;
      color: #aaa;
      text-align: center;
    }

    .termos a {
      color: #f39c12;
      text-decoration: none;
    }

    .termos a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>

  <div class="container">
    <h2>Escolha o valor da recarga</h2>
    <select id="valorRecarga">
      <option value="">Selecione o valor</option>
      <option value="60">R$ 60</option>
      <option value="160">R$ 160</option>
      <option value="300">R$ 300</option>
      <option value="450">R$ 450</option>
      <option value="500">R$ 500</option>
      <option value="650">R$ 650</option>
      <option value="700">R$ 700</option>
      <option value="850">R$ 850</option>
      <option value="900">R$ 900</option>
      <option value="1050">R$ 1050</option>
    </select>

    <button onclick="gerarPagamento()">Gerar Código Pix</button>

    <div id="resultado">
      <p><strong>Código Pix Copia e Cola:</strong></p>
      <input type="text" id="linkPagamento" readonly>
      <button onclick="copiarLink()">Copiar Código Pix</button>
    </div>

    <div class="opcoes-pagamento" id="opcoesPagamento">
      <button onclick="confirmarPagamento()">Confirmar Depósito</button>
      <button onclick="cancelarPagamento()">Cancelar</button>
      <button onclick="verificarPagamento()">Verificar Pagamento</button>
    </div>

    <div class="pagamento-confirmado" id="pagamentoConfirmado">
      <p>Pagamento Confirmado!</p>
      <button onclick="continuar()">Continuar</button>
    </div>

    <div class="termos">
      <p>Ao continuar, você concorda com os <a href="termos.html" target="_blank">Termos de Uso</a> e a <a href="politica-privacidade.html" target="_blank">Política de Privacidade</a>.</p>
    </div>
  </div>

  <script>
    const links = {
      "60": "00020126...60",
      "160": "00020126...160",
      "300": "00020126...300",
      "450": "00020126...450",
      "500": "00020126...500",
      "650": "00020126...650",
      "700": "00020126...700",
      "850": "00020126...850",
      "900": "00020126...900",
      "1050": "00020126...1050"
    };

    function gerarPagamento() {
      const valor = document.getElementById("valorRecarga").value;
      const linkPagamento = document.getElementById("linkPagamento");

      if (valor && links[valor]) {
        linkPagamento.value = links[valor];
        document.getElementById("resultado").style.display = "block";
        document.getElementById("opcoesPagamento").style.display = "block";
        salvarRecarga(valor, 'Pendente');
      } else {
        alert("Selecione um valor válido.");
      }
    }

    function copiarLink() {
      const linkPagamento = document.getElementById("linkPagamento");
      linkPagamento.select();
      document.execCommand("copy");
      alert("Código Pix copiado!");
    }

    function confirmarPagamento() {
      document.getElementById("opcoesPagamento").style.display = "none";
      document.getElementById("pagamentoConfirmado").style.display = "block";

      // Envia o status de "Confirmado" para o Firebase
      const valor = document.getElementById("valorRecarga").value;
      salvarRecarga(valor, 'Confirmado');
    }

    function cancelarPagamento() {
      document.getElementById("opcoesPagamento").style.display = "none";
      alert("Recarga cancelada!");

      // Envia o status de "Cancelado" para o Firebase
      const valor = document.getElementById("valorRecarga").value;
      salvarRecarga(valor, 'Cancelado');
    }

    function verificarPagamento() {
      alert("Verificando pagamento...");
      // Lógica de verificação do pagamento pode ser inserida aqui
    }

    function continuar() {
      alert('Pagamento aprovado e recarga realizada com sucesso!');
      // Aqui, você pode redirecionar para outra página ou simplesmente mostrar o sucesso
      // window.location.href = "televisao.html"; // Exemplo de redirecionamento
    }
  </script>
</body>
</html>
